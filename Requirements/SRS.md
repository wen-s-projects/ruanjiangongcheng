卡卡 (Calorie) 软件需求规格说明书 (SRS)
1. 引言 (Introduction)
卡卡 (Calorie) 是一款基于 AI 驱动的个人饮食与健康管理工具。它通过调用外部 AI 接口（如 GPT-4o-vision）实现食物识别，结合本地数据库，为用户提供精准的摄入追踪、代谢计算及方案推荐。
2. 系统总体描述 (Overall Description)
2.1 产品架构
客户端： Win 网页端 + 安卓 App。
管理端： 专用管理员 Web 门户（移动端不可进入）。
后端： 部署于笔记本/服务器，负责逻辑转发、外部 AI API 调用及本地数据库管理。
前端用vue3,后端用Django，数据库用mysql。
2.2 核心计算逻辑
摄入计算： $\text{每日总摄入} = \sum \text{各食物卡路里}$
状态反馈：
冗余 (Surplus)： 摄入 > 代谢需求
缺口 (Deficit)： 摄入 < 代谢需求
3. 功能需求 (Functional Requirements)
3.1 用户端特性 (User Features)
AI 识图与记录：
支持直接选择食物库食材或拍照 AI 识别。
AI 自动计算图片中食物的热量、克重、种类等。
然后AI识别到的传递到后端自动选择数据库中的食物新增当前餐食的食物
如果识别的时候数据库里没有则只写未知加克重、热量空出来、计算时按0计算
健康计算器矩阵：
BMI 计算器： 基于身高体重。
代热量计算器 (BMR/TDEE)： 基于用户填写的性别、年龄、身高、体重及运动强度系数。
日历历史记录：
日历视图中，日期格显示当日记录次数（如设计图中：“3”，代表那天3次）。
点击进入识图显示当前月份的总和冗余/缺口（数据不完全的或者缺失没填写的默认以0计算）
点击详细日期进入详情页，显示每餐图片、摄入明细及当日总卡路里冗余/缺口。
身体数据记录：
用户可定期更新个人身体数据（体重、体脂率等）。
食材上传：
用户发现库中无此食物时，可填写信息上传，申请加入公共库。
3.2 管理员端特性 (Admin Features)
审核机制：
专门的 Web 审核页面，查看用户提交的新食材申请，确认后转入正式数据库。
用户账号管理：
可查看用户活跃度，对于长期未使用的“僵尸账号”拥有删除权限。
访问限制：
管理员功能仅限网页端（Admin Dashboard），不开放移动端入口。
4. 用户界面逻辑 (UI Logic)
4.1 网页主页 (Web)
左侧： 日历形式的历史记录区。
右上： 当前身体数据汇总（BMI、TDEE、今日缺口看板）。
右下： AI 交互区域，包含文件上传（附件图片）和聊天框。
侧边栏/头像跳转： 个人设置（头像、简介、性别修改）。
4.2 安卓 App
首页： 模块化卡片（历史、缩略图、目标、当前冗余数据）。
底部导航： 【记录】按钮触发相机拍照或库搜索。
注册登录： 包含“隐私协议”勾选框。
5. 非功能性需求 (Non-functional Requirements)
5.1 外部接口与性能
AI 接口： 异步调用外部 API，需处理网络超时情况。
数据库： 建议使用 SQLite (单机轻量) 或 PostgreSQL。
5.2 安全性
管理端鉴权： 管理员账号需有独立的权限标识（Role-based Access Control）。
数据脱敏： 管理员删除账号时，需级联删除对应的历史饮食图片，保护隐私。
6. 数据库初步设计 (Database Schema)
本数据库包含6张核心数据表，覆盖管理员管理、用户信息、身体指标、饮食记录、食物字典等业务，通过外键关联保证数据一致性，支撑用户健康数据追踪与饮食热量统计功能。
Admin（管理员表）
存储管理员登录信息，AdminName 为主键，AdminPassword 非空唯一，保障系统后台登录安全。
User（用户表）
存储用户基础信息，ID 为主键，关联其他所有业务表；Username 非空唯一，Passport 存储加密登录凭证，同时包含头像、简介等个性化字段。
BodyData（身体数据表）
记录用户身体指标，BodyID 为主键，UserID 关联用户表；涵盖年龄、身高、体重、体脂率等核心指标，支持 BMI 与基础代谢率计算。
Event（饮食总表）
汇总用户每日饮食情况，EventID 为主键，UserID 关联用户表；记录饮食总结、记录时间及备注，用于整体饮食情况追溯。
FoodDict（食物字典表）
存储食物标准热量数据，FoodID 为主键，FoodName 非空唯一；Calorie 记录每 100 克食物热量，作为饮食热量计算依据。
FoodRecord（食物摄入表）
记录用户每次食物摄入详情，RecordID 为主键，UserID关联用户表、FoodID关联食物字典表；包含摄入时间、餐次类型、摄入量，支撑饮食总热量统计。
表关联关系：
User 表与 BodyData、Event、FoodRecord 为一对多关联；
FoodDict 表与 FoodRecord 为一对多关联。